<!DOCTYPE HTML>

<html lang="en">
	<head>
		<!-- Global site tag (gtag.js) - Google Analytics -->
		<script async src="https://www.googletagmanager.com/gtag/js?id=UA-121628546-1"></script>
		<script>
 		 window.dataLayer = window.dataLayer || [];
  		function gtag(){dataLayer.push(arguments);}
  		gtag('js', new Date());

  		gtag('config', 'UA-121628546-1');
		</script>
		<title>Flori</title>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />

		<meta name="theme-color" content="#54C2ED">
		<meta name="description" content="The ultimate smart houseplant companion">

    <meta property="og:title" content="Flori">
    <meta property="og:image" content="./img/OpenGraphSplash.png">
    <meta property="og:description" content="The ultimate smart houseplant companion">

		<link rel="stylesheet" href="main.css" />
		<link rel="icon" type="image/png" href="img/favicon.png" sizes="16x16">
  	<link rel="icon" type="image/png" href="img/favicon2x.png" sizes="32x32">
  	<link rel="icon" type="image/png" href="img/favicon6x.png" sizes="96x96">
		<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.1.0/css/all.css" integrity="sha384-lKuwvrZot6UHsBSfcMvOkWwlCMgc0TaWr+30HWe3a4ltaBwTZhyTEggF5tJv8tbt" crossorigin="anonymous">
		<link href="https://fonts.googleapis.com/css?family=Dosis:300,500" rel="stylesheet">
		<!--noscript><link rel="stylesheet" href="assets/css/noscript.css" /></noscript-->
	</head>
	<body class="is-preload">

		<body>
			<div class="flex-container">
				<img class="main-logo" alt="Flori Logo" src="img/LogoTransparent.svg">
				<p>
					Coming soon </br> The smart houseplant companion.
				</p>
				<div class="form-container">
					<p id="thanks-text">
						Thanks for your interest!
					</p>
				<form method="post" action="#" class="form" id="my-form">
					<div class="fields">
						<div class="field">
							<input type="email" name="email" id="email-text" placeholder="email address" autocomplete="off" size=30 required/>
						</div>

					</div>
					<input type="submit" value="SUBSCRIBE">
				</form>
			</div>
				<span class="social-links">
					<a  class="social-link"href="https://www.facebook.com/floricompanion"><i alt="facebook" class="fab fa-facebook-square"></i></a>
					<a  class="social-link"href="https://twitter.com/floricompanion"><i alt="twitter" class="fab fa-twitter-square"></i></a>
				</span>

			</div>
		</body>
		<!-- Scripts -->
			<script>
				var form;
				window.onload = function(){
					form = document.getElementById('my-form');
					if (form.attachEvent) {
    				form.attachEvent("submit", processForm);
					} else {
    				form.addEventListener("submit", processForm);
					}
				}
				function printRes(res) {
					console.log(res)
				};

				function processForm(e) {
    			if (e.preventDefault) e.preventDefault();
					handleSubmit(document.getElementById('email-text').value)
					form.style.display = "none";
					document.getElementById('thanks-text').style.display = "block"
    			/* do what you want with the form */

    			// You must return false to prevent the default form behavior
    			return false;
				}

				function handleSubmit(email) {
					console.log("Making post");
					httpPostAsync(
						"https://script.google.com/macros/s/AKfycbydDFQEO3OWQ7vQGOxHCSMBq90veePvG0rihI6AUPFIDBIOQkQ/dev",
						email,
						printRes
							)
				};

				function httpPostAsync(theUrl,email, callback)
				{
					var xmlHttp = new XMLHttpRequest();
					xmlHttp.onreadystatechange = function() {
						if (xmlHttp.readyState == 4 && xmlHttp.status == 200)
						callback(xmlHttp.responseText);
					}
					xmlHttp.open("GET", theUrl+"?email="+email, true); // true for asynchronous
					//xmlHttp.setRequestHeader("name",name);
					//xmlHttp.setRequestHeader("email",email);
					xmlHttp.send(null);
				}

			</script>

	</body>
</html>
